/*!
* @license easyCounterJS
* Visit [https://github.com/kWeb24/easyCounter.js] for documentation, updates and examples.
* Version 0.2.0
*
* Copyright (c) 2017 kamilweber.pl
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
!function(a,b,c,d){"use strict";function g(b,c){this._name=e,this.element=b,this._defaults=f,this.options=c,this.settings=a.extend({},f,c),this.defaultText=a(this.element).text(),this.keyValues={min:0,max:0,isVisible:!1,isFloat:!1,isExecuted:!1,isExecuting:!1,autorun:this.settings.autorun,disableOverride:this.settings.disableoverride,runonce:this.settings.runonce,decimals:this.settings.decimals,duration:this.settings.duration,delay:this.settings.delay,direction:this.settings.direction},this.init(),this.clearValues()}var e="easyCounter",f={duration:1e3,delay:0,decimals:0,runonce:!1,disableoverride:!1,autorun:!0,direction:"asc",attrmin:"ec-min",attrmax:"ec-max",attrdecimals:"ec-decimals",attrduration:"ec-duration",attrdelay:"ec-delay",attrdirection:"ec-direction",attrrunonce:"ec-run-once",attrdisableoverride:"ec-disable-override",attrautorun:"ec-auto-run"};a.extend(g.prototype,{init:function(){var d=this.element,e=this;this.checkAttributes(d),a(b).scroll(function(){e.isOnScreen(d)}),a(c).ready(function(){e.isOnScreen(d)}),a(b).on("ec-element-enter-screen",{},function(a,b){b===e.element&&e.shouldRun()&&(e.keyValues.isExecuting=!0,e.countUp(b,e))}),a(b).on("ec-element-leave-screen",{},function(a,b){})},checkAttributes:function(b){var c={min:a(b).attr(this.settings.attrmin),max:a(b).attr(this.settings.attrmax),decimals:a(b).attr(this.settings.attrdecimals),duration:a(b).attr(this.settings.attrduration),delay:a(b).attr(this.settings.attrdelay),direction:a(b).attr(this.settings.attrdirection),runonce:a(b).attr(this.settings.attrrunonce),autorun:a(b).attr(this.settings.attrautorun)};for(var e in c)if(typeof c[e]!=typeof d&&c[e]!==!1)this.keyValues[e]=this.validate(c[e],e);else{if("min"==e||"max"==e)return this.throwError("init.checkAttributes","attr"+e+" attribute not found"),!1;"decimals"==e&&typeof this.options.decimals==typeof d?(this.keyValues.min=this.setValueAttributes(c.min),this.keyValues.max=this.setValueAttributes(c.max)):this.keyValues[e]=this.validate(this.settings[e],e)}},validate:function(b,c){var d=b.toString().replace(" ","").replace(",",".");if("direction"==c&&"asc"!=b&&"desc"!=b)return this.throwError("init.validate","attr"+c+" must be ASC or DESC"),!1;if(!a.isNumeric(d)&&"direction"!=c&&"runonce"!=c&&"autorun"!=c)return this.throwError("init.validate","attr"+c+" is not numeric"),!1;if("runonce"==c||"disableoverride"==c||"autorun"==c){var e=null;if("true"!=b&&"1"!=b||(e=!0),"false"!=b&&"0"!=b||(e=!1),e!==!0&&e!==!1)return this.throwError("init.validate","attr"+c+" must be true or false"),!1;d=e}return"min"!=c&&"max"!=c||this.setValueAttributes(d),d},setValueAttributes:function(a){if(Math.floor(a)!=a){this.keyValues.isFloat=!0;var b=(a.split(".")[1]||[]).length;b>this.keyValues.decimals&&(this.keyValues.decimals=b)}return a},isOnScreen:function(c){var d=a(b),e={top:d.scrollTop(),left:d.scrollLeft()};e.right=e.left+d.width(),e.bottom=e.top+d.height();var f={top:a(c).offset().top,bottom:a(c).offset().bottom,right:a(c).offset().right,left:a(c).offset().left};f.right=f.left+a(c).outerWidth(),f.bottom=f.top+a(c).outerHeight();var g=!(e.right<f.left||e.left>f.right||e.bottom<f.top||e.top>f.bottom);return g?this.keyValues.isVisible||(a(b).trigger("ec-element-enter-screen",[c]),this.keyValues.isVisible=!0):this.keyValues.isVisible&&(a(b).trigger("ec-element-leave-screen",[c]),this.keyValues.isVisible=!1),g},countUp:function(c,d){var e=d.keyValues.isFloat?parseFloat(d.keyValues.min):parseInt(d.keyValues.min),f=d.keyValues.isFloat?parseFloat(d.keyValues.max):parseInt(d.keyValues.max),g=d.keyValues.delay;if("desc"==d.keyValues.direction){var h=e;e=f,f=h}setTimeout(function(){a({countNum:e}).stop(!0,!0).animate({countNum:f},{duration:parseInt(d.keyValues.duration),easing:"linear",start:function(){a(b).trigger("ec-animation-start",[c]),d.keyValues.isExecuting=!0},step:function(){d.keyValues.isFloat?a(c).text(this.countNum.toFixed(d.keyValues.decimals)):a(c).text(Math.floor(this.countNum))},complete:function(){d.keyValues.isFloat?a(c).text(this.countNum.toFixed(d.keyValues.decimals)):a(c).text(Math.floor(this.countNum))},done:function(){a(b).trigger("ec-animation-end",[c]),d.keyValues.isExecuting=!1,d.keyValues.isExecuted=!0}})},g)},shouldRun:function(){return!(this.keyValues.isExecuting||!this.keyValues.autorun||(!this.keyValues.runonce||this.keyValues.isExecuted)&&this.keyValues.runonce)},clearValues:function(){var b="asc"==this.keyValues.direction?this.keyValues.min:this.keyValues.max;a(this.element).text().length>0&&a(this.element).text(this.defaultText),this.keyValues.disableOverride||a(this.element).text()||a(this.element).text(b),this.keyValues.disableOverride&&!a(this.element).text()&&a(this.element).text("&nbsp;")},fire:function(a){a!==this.element||this.keyValues.isExecuting||(this.keyValues.isExecuting=!0,this.countUp(a,this))},throwError:function(a,b){console.error("%cError: easyCounter.js ["+a+"] -> "+b,"background: #c0392b; color: white;")},throwWarning:function(a,b){console.error("%cWarning: easyCounter.js ["+a+"] -> "+b,"background: #d35400; color: white;")}}),a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))})},a.fn.ecfire=function(){return this.data("plugin_easyCounter")?void this.data("plugin_easyCounter").fire(this[0]):(console.error("%cError: easyCounter.js [fire] -> Given element does not have easyCounter.js attached to it. Initialize first.","background: #c0392b; color: white;"),!1)}}(jQuery,window,document);
